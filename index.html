<!DOCTYPE html>
<html lang="zh">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      * {
        margin: 0;
        padding: 0;
      }
      .fl {
        display: flex;
        align-items: center;
      }

      .fl-c {
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .fl-b {
        display: flex;
        align-items: center;
        justify-content: space-between;
      }

      .lyrics::-webkit-scrollbar {
        width: 5px;
        height: 1px;
      }

      .lyrics::-webkit-scrollbar-thumb {
        border-radius: 10px;
        -webkit-box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.2);
        box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.2);
        background: #e7c3c3c2;
      }

      .lyrics::-webkit-scrollbar-track {
        border-radius: 10px;
        background: #ededed00;
      }

      header {
        height: 50px;
        background: #000;
        padding: 0 40px;
        color: #fff;
        min-width: 1200px;
      }

      .left-h {
        width: 500px;
        height: 100%;
      }

      .logo-wap {
        width: 106px;
        height: 100%;
        background: url(./images/4.jpg);
      }

      .right-h {
        width: 660px;
        font-size: 13px;
        color: rgb(226, 215, 215);
      }

      .item-r {
        margin-right: 15px;
        cursor: pointer;
        transition: all 0.3s;
      }

      .item-h {
        cursor: pointer;
        transition: all 0.3s;
      }

      .item-h:hover,
      .item-r:hover {
        color: rgb(231, 163, 17);
      }

      .icon-r {
        width: 15px;
        height: 15px;
        background: url(./images/sing.png);
        margin-right: 5px;
      }

      .icon-r-t {
        width: 25px;
        height: 25px;
        background: url(./images/top.png);
        background-size: 100% 100%;
      }

      .search {
        width: 185px;
        height: 27px;
        background-color: #333;
        border-radius: 20px;
      }

      .search input {
        background: none;
        border: none;
        outline: none;
        width: 130px;
        color: #fff;
      }

      .s-icon {
        width: 20px;
        height: 20px;
        background: url(./images/search.png);
        background-size: 100% 100%;
      }

      .container {
        width: 1200px;
        margin: 0 auto;
      }

      .sing-text {
        width: 750px;
        text-align: center;
        padding: 30px 0 0 0;
      }

      .sing-des {
        border-bottom: 1px solid rgba(107, 94, 94, 0.151);
      }

      .lyrics {
        padding: 20px 0 0;
        font-size: 13px;
        color: #333;
        line-height: 30px;
        height: 400px;
        overflow-y: scroll;
      }

      .sing-control {
        width: 450px;
      }

      .img {
        width: 300px;
        height: 300px;
        border-radius: 50%;
        border: 1px solid rgb(179, 165, 165);
        margin: 0 auto 30px;
        background: url(./images/1.jpg);
        background-size: 100% 100%;
      }

      .ac {
        animation: spin infinite 10s linear;
      }

      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      .play-btn {
        width: 30px;
        height: 30px;
        cursor: pointer;
      }

      .play-btn img {
        width: 100%;
        height: 100%;
      }

      .loadign-wap {
        width: 300px;
        height: 4px;
        background: #cccccc;
        margin: 0 10px;
        cursor: pointer;
        position: relative;
      }

      .loading {
        cursor: pointer;
        position: absolute;
        top: 0;
        bottom: 0;
        width: 0px;
        background: #565990;
        transition: all 0.1s;
      }

      .loading::after {
        content: "";
        display: block;
        position: absolute;
        top: 50%;
        right: -5px;
        transform: translate(0, -50%);
        width: 10px;
        height: 10px;
        border-radius: 50%;
        background: rgb(247, 178, 5);
      }

      .time {
        font-size: 12px;
        color: rgb(148, 135, 135);
      }

      .sound {
        margin: 0 0 0 8px;
        cursor: pointer;
      }

      .download {
        padding: 5px 0;
        width: 200px;
        margin: 20px auto;
        background: #565990;
        border-radius: 20px;
        font-size: 13px;
        cursor: pointer;
      }

      .pinglun {
        width: 800px;
        margin: 30px auto 30px;
      }

      .pinglun .tit {
        border-bottom: 1px solid rgba(51, 51, 51, 0.178);
        padding: 0 0 20px 0;
      }
      .pinglun .tit p:last-child {
        font-size: 12px;
        margin: 0 0 0 10px;
      }

      .inp-wap {
        align-items: flex-start;
        margin: 20px 0 0;
      }

      .usser-img {
        width: 50px;
        height: 50px;
        background: url(./images/6.jpg);
        background-size: 100% 100%;
      }

      .input p {
        font-size: 12px;
      }
      .input {
        width: 730px;
      }

      .expression {
        width: 35px;
        height: 35px;
        background: url(./images/exp.png);
        background-size: 100% 100%;
        cursor: pointer;
      }

      textarea {
        box-sizing: border-box;
        resize: none;
        width: 730px;
        height: 130px;
        border: 1px solid rgba(51, 51, 51, 0.185);
        border-radius: 10px;
        padding: 10px;
        outline: none;
      }

      .pl-btn {
        background: rgb(231, 163, 17);
        padding: 5px 20px;
        border-radius: 5px;
        color: #fff;
        cursor: pointer;
        margin-left: 20px;
      }

      .out-put .content {
        padding: 10px 0;
        word-break: break-all;
      }
      .out-put {
        width: 730px;
      }

      .pl-page {
        margin: 30px 0 10px;
      }

      .page-up,
      .page-down,
      .page-num {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background: rgb(236, 230, 230);
        margin: 0 5px;
        cursor: pointer;
      }

      .page-down {
        transform: rotate(180deg);
      }

      .page-up img,
      .page-down img,
      .page-num img {
        width: 50%;
        height: 50%;
      }

      .page-ac {
        color: #fff;
        background: rgb(231, 163, 17);
      }

      .msg-wap .user-img {
        width: 45px;
        height: 45px;
        border-radius: 50%;
        overflow: hidden;
      }

      .msg-con p {
        font-size: 12px;
      }
      .msg-con {
        width: 170px;
        height: 60px;
        background: #d8d9eb;
        padding: 0 30px;
        margin-left: 20px;
        border-radius: 15px;
        position: relative;
      }

      .msg-con::before {
        content: "";
        position: absolute;
        left: -10px;
        display: block;
        width: 0;
        height: 0;
        border-top: 10px solid transparent;
        border-right: 20px solid #d8d9eb;
        border-bottom: 10px solid transparent;
      }

    </style>
  </head>
  <body>
    <header class="fl-b">
      <div class="left-h fl-b">
        <div class="logo-wap"></div>
        <div class="item-h">é¦–é¡µ</div>
        <div class="item-h">æ¦œå•</div>
        <div class="item-h">æ­Œæ‰‹</div>
        <div class="item-h">ä¸‹è½½é…·æˆ‘å®¢æˆ·ç«¯</div>
      </div>
      <div class="right-h fl">
        <div class="item-r fl-c">
          <div class="icon-r"></div>
          <div>ç¾å¥³ç§€</div>
        </div>
        <div class="item-r fl-c">
          <div class="icon-r"></div>
          <div>é…·æˆ‘è€³æœº</div>
        </div>
        <div class="item-r fl-c">
          <div class="icon-r"></div>
          <div>VIPä¼šå‘˜</div>
        </div>
        <div class="item-r fl-c">
          <div class="icon-r"></div>
          <div>iå¬</div>
        </div>
        <div class="item-r fl-c">
          <div>æ›´å¤šæœåŠ¡</div>
        </div>
        <div class="item-r fl-c">
          <div>ç™»å½•</div>
        </div>
        <div class="item-r fl-c">
          <div class="icon-r-t"></div>
        </div>
        <div class="search fl-c">
          <input type="text" name="" id="" placeholder="æ‰¾åˆ°å¥½éŸ³ä¹" />
          <div class="s-icon"></div>
        </div>
      </div>
    </header>
    <div class="container fl-b">
      <div class="sing-text">
        <div class="sing-des">
          <p style="font-size: 25px; margin: 30px">å–œç¾Šç¾Š</p>
          <p style="font-size: 13px; color: 333">
            ä¸“è¾‘ï¼š<span style="color: rgb(231, 163, 17); padding-right: 20px"
              >å„¿æ­Œå¤§å…¨</span>
            æ­Œæ‰‹ï¼š<span style="color: rgb(231, 163, 17); padding-right: 20px"
              >åè¯­ç¾¤æ˜Ÿ</span>
            åˆ†äº«<span style="color: rgb(231, 163, 17); padding: 0 20px"
              >è¯„è®º</span>
          </p>
          <p style="font-size: 13px; margin: 10px 0">
            ä¸Šä¼ æ—¶é—´ï¼š2015-10-02 æ­Œæ›²æ¥æºï¼šæ°‘å¤§ç›¸æ€æ¹–ç½‘çƒç¤¾
          </p>
        </div>
        <div class="lyrics">
          <p>å–œç¾Šç¾Š - åˆ«çœ‹æˆ‘åªæ˜¯ä¸€åªç¾Š</p>
          <p>è¯ï¼šå¤å€©æ•</p>
          <p>æ›²ï¼šå¤å€©æ•</p>
          <p>å–œç¾Šç¾Šç¾ç¾Šç¾Šæ‡’ç¾Šç¾Šæ²¸ç¾Šç¾Š</p>
          <p>æ…¢ç¾Šç¾Šè½¯ç»µç»µçº¢å¤ªç‹¼ç°å¤ªç‹¼</p>
          <p>åˆ«çœ‹æˆ‘åªæ˜¯ä¸€åªç¾Š</p>
          <p>ç»¿è‰å› ä¸ºæˆ‘å˜çš„æ›´é¦™</p>
          <p>å¤©ç©ºå› ä¸ºæˆ‘å˜çš„æ›´è“</p>
          <p>ç™½äº‘å› ä¸ºæˆ‘å˜çš„æŸ”è½¯</p>
          <p>åˆ«çœ‹æˆ‘åªæ˜¯ä¸€åªç¾Š</p>
          <p>ç¾Šå„¿çš„èªæ˜éš¾ä»¥æƒ³åƒ</p>
          <p style="color: rgb(231, 163, 17)">å¤©å†é«˜å¿ƒæƒ…ä¸€æ ·å¥”æ”¾</p>
          <p>æ¯å¤©éƒ½è¿½èµ¶å¤ªé˜³</p>
          <p>æœ‰ä»€ä¹ˆéš¾é¢˜å»ç‰µç»Šæˆ‘éƒ½ä¸ä¼šå»å¿ƒä¼¤</p>
          <p>æœ‰ä»€ä¹ˆå±é™©åœ¨æˆ‘é¢å‰ä¹Ÿä¸ä¼šå»æ…Œä¹±</p>
          <p>å°±ç®—æœ‰ç‹¼ç¾¤æŠŠæˆ‘è¿½æ•ä¹Ÿå½“åšæ¸¸æˆä¸€åœº</p>
          <p>åœ¨ä»€ä¹ˆæ—¶é—´éƒ½çˆ±å¼€å¿ƒç¬‘å®¹éƒ½ä¼šé£ç¿”</p>
          <p>å°±ç®—ä¼šæ‘”å€’ç«™å¾—èµ·æ¥æ°¸è¿œä¸ä¼šæ²®ä¸§</p>
          <p>åœ¨æ‰€æœ‰å¤©æ°”æ‹¥æœ‰å«äººå¤§ç¬‘çš„åŠ›é‡</p>
          <p>è™½ç„¶æˆ‘åªæ˜¯ç¾Š</p>
          <p>å–œç¾Šç¾Šç¾ç¾Šç¾Šæ‡’ç¾Šç¾Šæ²¸ç¾Šç¾Š</p>
          <p>æ…¢ç¾Šç¾Šè½¯ç»µç»µçº¢å¤ªç‹¼ç°å¤ªç‹¼</p>
        </div>
      </div>
      <div class="sing-control">
        <div class="img"></div>
        <div class="control fl-c">
          <div class="fl">
            <div class="play-btn">
              <img id="playIcon" src="./images/play.png" alt="" />
            </div>
            <div class="loadign-wap">
              <div class="loading"></div>
            </div>
            <div class="time">00.00</div>
            <div class="sound">
              <img id="soundStatus" src="./images/jyn.png" width="20" alt="" />
            </div>
          </div>
        </div>
        <div class="download fl-c">
          <div class="icon">
            <img src="./images/download.png" width="15px" alt="" />
          </div>
          <div>å…è´¹ä¸‹è½½è¿™é¦–æ­Œ</div>
        </div>
        <div class="msg-wap fl-c">
          <div class="fl-c">
            <div class="user-img fl-c">
              <img src="./images/6.jpg" alt="">
            </div>
            <div class="msg-con fl-b">
              <div>
                <p style="color: rgba(51, 51, 51, 0.5);">éƒ­å­ä»ª--H5ç­</p>
                <p style="color: rgb(34, 81, 124);">å–œç¾Šç¾Šä¸ç°å¤ªç‹¼</p>
              </div>
              <div>
                <p style="opacity: 0;">1</p>
                <p style="color: rgb(87, 44, 167);">å»ç°åœº></p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="pinglun">
      <div class="tit fl">
        <p>è¯„è®º</p>
        <p><span id="pinglunNum">0</span>æ¡è¯„è®º</p>
      </div>
      <div class="inp-wap fl-b">
        <div class="usser-img"></div>
        <div class="input">
          <textarea
            name=""
            id="plCotent"
            placeholder="åˆ†äº«ä½ çš„éŸ³ä¹è§è§£"
          ></textarea>
          <div class="fl-b">
            <div class="expression"></div>
            <div class="fl">
              <p>å·²è¾“å…¥<span id="plNum">0</span>ä¸ªå­—</p>
              <div class="pl-btn">è¯„è®º</div>
            </div>
          </div>
        </div>
      </div>
      <div class="tit fl" style="margin-top: 50px">
        <p>ç²¾å½©è¯„è®º</p>
        <p></p>
      </div>
      <div id="plList"></div>
      <div class="fl-c">
        <div class="pl-page fl">
          <div class="page-up fl-c">
            <img src="./images/left.png" alt="" />
          </div>
          <div id="pageNumWap" class="fl">

          </div>
          <div class="page-down fl-c">
            <img src="./images/left.png" alt="" />
          </div>
        </div>
      </div>
    </div>
    <audio id="audio" src="./sing.mp3"></audio>
  </body>
  <script>   
    let isPlay = false
    let isSound = true
    let sing = document.querySelector('#audio')
    let soundBtn = document.querySelector('.sound')
    let playBtn = document.querySelector('.play-btn')
    let timeDom = document.querySelector('.time')
    let singImg = document.querySelector('.img')
    let timeS = 0
    let timeM = 0
    let textTimer = null
    playBtn.onclick = () => {
        if (isPlay) {
            sing.pause()
            singImg.classList.remove('ac')
            document.getElementById('playIcon').src = './images/play.png'
        } else {
            sing.play()
            singImg.classList.add('ac')
            document.getElementById('playIcon').src = './images/pause.png'
        }
        isPlay = !isPlay
    }
    soundBtn.onclick = () => {
        if (isSound) {
            document.getElementById('soundStatus').src = './images/jy.png'
        } else {
            document.getElementById('soundStatus').src = './images/jyn.png'
        }
        isSound = !isSound
        sing.muted = !isSound
    }
    sing.onplay = (e) => {
        console.dir(e.target)
        playAudio(e)
    }
    function playAudio(e) {

        textTimer = setInterval(() => {
            if (timeS < 60) {
                timeS += 1
            } else {
                timeS = 0
                timeM += 1
            }

            timeDom.innerHTML = `0${timeM}:${timeS}`

            console.log(sing.currentTime)

            document.querySelector('.loading').style.width = sing.currentTime / sing.duration * 300 + 'px'
        }, 1000);
    }

    sing.onpause = (e) => {
        clearInterval(textTimer)
    }
    // æ’­æ”¾æˆªè‡³
    sing.onended = () => {
        timeS = 0
        timeM = 0
        isPlay = false
        isSound = true
        document.querySelector('.loading').style.width = '0px'
        clearInterval(textTimer)
        timeDom.innerHTML = `0${timeM}:${timeS}`
        singImg.classList.remove('ac')
        document.getElementById('playIcon').src = './images/play.png'
    }
    document.querySelector('.loadign-wap').onclick = (e) => {
        console.dir(e.offsetX)
        console.dir(sing.paused)
        if (sing.paused) {
            sing.play()
            singImg.classList.add('ac')
            document.getElementById('playIcon').src = './images/pause.png'
            sing.currentTime = e.offsetX / 300 * sing.duration
            isPlay = true
            isSound = false
            if (sing.currentTime < 60) {
                timeS = parseInt(sing.currentTime)
            } else {
                timeS = parseInt(sing.currentTime % 60)
                timeM = parseInt(sing.currentTime / 60)
            }
        } else {
            sing.currentTime = e.offsetX / 300 * sing.duration
            if (sing.currentTime < 60) {
                timeS = parseInt(sing.currentTime)
            } else {
                timeS = parseInt(sing.currentTime % 60)
                timeM = parseInt(sing.currentTime / 60)
            }
        }

        document.querySelector('.loading').style.width = e.offsetX + 'px'
    }
    // 
    Date.prototype.format = function (format) {
        /*
        * eg:format="yyyy-MM-dd hh:mm:ss";
        */
        var o = {
            "M+": this.getMonth() + 1, // month
            "d+": this.getDate(), // day
            "h+": this.getHours(), // hour
            "m+": this.getMinutes(), // minute
            "s+": this.getSeconds(), // second
            "q+": Math.floor((this.getMonth() + 3) / 3), // quarter
            "S": this.getMilliseconds()
            // millisecond
        }
        if (/(y+)/.test(format)) {
            format = format.replace(RegExp.$1, (this.getFullYear() + "")
                .substr(4 - RegExp.$1.length));
        }
        for (var k in o) {
            if (new RegExp("(" + k + ")").test(format)) {
                format = format.replace(RegExp.$1, RegExp.$1.length == 1 ? o[k] :
                    ("00" + o[k]).substr(("" + o[k]).length));
            }
        }
        return format;
    }
    let plValue = document.getElementById('plCotent')
    let plWap = document.getElementById('plList')
    let pageWap = document.getElementById('pageNumWap')
    plValue.oninput = () => {
        document.getElementById('plNum').innerHTML = plValue.value.length
    }
    let defaultPl = [{
        name: 'gotget',
        content: 'æˆ‘å–œæ¬¢å¾ˆå¤šæ­Œæ›²ï¼Œå–œæ¬¢è¿‡å¾ˆå¤šå”±æ­Œçš„äººï¼Œå“ªäº›æœ‰æ—¶å€™ä¸æ˜¯æˆ‘çš„çˆ±å¥½ï¼Œå·²ç»æˆä¸ºäº†æˆ‘é‚£æ®µé’æ˜¥çš„å›å¿†ï¼Œæˆ‘ä¸‹è½½å¯ä»¥å¾ˆå‚²å¨‡',
        time: '2017-06-03 16:58:02',
    }, {
        name: 'é›…åŠ›å£«å¤šå¾·',
        content: 'å­¦æ ¡æ™šä¼šè¡¨æ¼”è¿™æ­ŒğŸ˜€',
        time: '2017-05-14 16:16:53',
    }]
    let userPl = []
    let currentPage = 1
    let pageSize = 3
    function initPl() {
        loadAllPl()
        loadPageCon()
        loadDefaultPl(true)
    }
    document.querySelector('.pl-btn').onclick = () => {
        if (plValue.value === '') {
            alert('è¯„è®ºä¸ºç©º')
            return
        }
        let vote = {}
        vote.name = 'éƒ­å­ä»ª'
        vote.content = plValue.value
        vote.time = new Date().format("yyyy-MM-dd hh:mm:ss")
        userPl.push(vote)
        defaultPl.unshift(vote)
        loadDefaultPl()
        loadPageCon()
        window.localStorage.setItem('pl', JSON.stringify(userPl))
        plValue.value = ''
    }
    function loadAllPl() {
        let plObj = window.localStorage.getItem('pl')
        if (!plObj) return
        userPl = JSON.parse(plObj)

        defaultPl.push(...userPl)
        console.log(JSON.parse(plObj))
    }
    function loadPageCon() {
        pageWap.innerHTML = ''
        let pageAll = Math.ceil(defaultPl.length / 3);
        for (let i = 1; i <= pageAll; i++) {
            let dom = document.createElement('div')
            dom.innerHTML = `
            <div class="page-num fl-c ${i === currentPage ? 'page-ac' : ''}">${i}</div>
            `
            pageWap.appendChild(dom)
        }

    }
    function loadDefaultPl(first = false) {
        plWap.innerHTML = ''

        if (first) {
            defaultPl = defaultPl.reverse()
        }
        console.log(defaultPl)
        let showPl = defaultPl.slice((currentPage - 1) * 3, pageSize * currentPage)
        console.log(showPl)
        for (let i = 0; i < showPl.length; i++) {
            let dom = document.createElement('div')
            dom.innerHTML = `
            <div class="inp-wap fl-b">
              <div class="usser-img"></div>
              <div class="out-put">
                <div class="fl-b">
                  <div style="color: rgb(156, 102, 20)">${showPl[i].name}</div>
                  <div>åˆ†äº«</div>
                </div>
                <div class="content">${showPl[i].content}</div>
                <div class="fl-b">
                  <div class="time">${showPl[i].time}</div>
                  <div class="fl-c">
                    <div class="fl-c">
                      <div>666</div>
                      <div>
                        <img src="./images/good.png" width="20px" alt="" />
                      </div>
                    </div>
                    <div style="margin-left: 10px">å›å¤</div>
                  </div>
                </div>
              </div>
            </div>
            `
            plWap.appendChild(dom)
        }
    }
    document.querySelector('.page-up').onclick = () => {
        if (currentPage == 1) return
        currentPage -= 1
        loadPageCon()
        loadDefaultPl()
    }
    document.querySelector('.page-down').onclick = () => {
        if (currentPage == Math.ceil(defaultPl.length / 3)) return
        currentPage += 1
        loadPageCon()
        loadDefaultPl()
    }
    document.querySelector('#pageNumWap').onclick = (e) => {
        if (parseInt(e.target.innerHTML)) {
            currentPage = parseInt(e.target.innerHTML)
            loadPageCon()
            loadDefaultPl()
        }
    }
    initPl();
  </script>
</html>
